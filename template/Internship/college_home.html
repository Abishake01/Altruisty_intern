{% extends 'base.html' %}
{% block content %}
{% load static %}
<link rel="stylesheet" type="text/css" href="{% static 'css/internship_home.css' %}" />
<link rel="stylesheet" type="text/css" href="{% static 'css/college_home.css' %}" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
      rel="stylesheet" />

      
      
      <div class="updates-events-overlay-container" id="updates-events-overlay-container">
        <div class="updates-events-inner-container">
          <button class="update-events-close-btn" id="update-events-close-btn">&times;</button>
      
          <div class="updates-events">
            {% if image %}
            <img src="{% url 'banner_image' %}" alt="College Banner" style="width:100%; height:auto;">
            {% else %}
              <p>No image uploaded yet.</p>
            {% endif %}
            
             
          </div>
        </div>
      </div>
      
 
<div class="flat-pages-title-home4 relative">
    <div class="themesflat-container w-full">
        <div class="row">
            <div class="col-xl-6 col-lg-6 col-md-12"
                 style="margin-top: -70px">
                <div class="content">
                    <div class="author flex items-center"
                         style="margin-bottom: 40px">
                        <div class="avatar" style="width: 60px">
                            <img src="{% static 'images/box-item/rank-01.jpg' %}"
                                 alt="Image" />
                        </div>
                        <div class="info">
                            <span>{{user_id}}</span>
                            <h6><a href="author-2.html">{{college.College_name}}</a></h6>
                        </div>
                    </div>
                    <h1 data-wow-delay="0s"
                        class="wow fadeInUp">
                        Empower Progress, Track Excellence
                    </h1>
                    <p data-wow-delay="0.1s" class="wow fadeInUp">
                        Your Gateway to Student Success!
                    </p>
                    <div data-wow-delay="0.2s"
                         class="wow fadeInUp flat-button flex items-center">

                        <a href="#" class="tf-button style-1 h50 w140 active" id="discover-more-btn">
                            Progress<i class="icon-arrow-up-right2"></i>
                        </a>
                        <!-- Notification Icon -->
                        <span class="notification-icon ml-8" id="notification-icon">
                            <i class="fas fa-bell"></i>
                        </span>
                    </div>
                </div>
            </div>

            <div
            class="notification-overlay-container"
            id="notification-overlay-container"
          >
            <div class="notification-inner-container">
              <button class="close-btn" id="close-btn">&times;</button>
              <div class="notification-header" style="margin-top: 20px">
                Notifications
              </div>
              <div class="notification-div-container">
                {% for noti in notifications %}
                <div class="related-posts-item" style="margin-top: 20px">
                  <div class="item-avatar">
                    <img
                      src="{% static 'images/avatar/avatar-04.png' %}"
                      alt="Profile"
                    />
                  </div>
                  <div class="card-content">
                    <h5>
                      <a href="nft-detail-2.html">{{noti.notification}}</a>
                    </h5>
                    <div class="item date">{{noti.created_at}}</div>
                  </div>
                  <div class="delete-icon">
                    <i class="fas fa-trash-alt"></i>
                  </div>
                </div>
                {% endfor %}

              </div>
              <div class="notification-header" style="margin-top: 40px">
                Updates and Events
              </div>
              <div class="updates-events-container">
                <div class="custom-slider">
                  <div class="custom-slider-wrapper">
                    <!-- Custom Slider Slides -->
                    {% for event in events %}
                    <div class="custom-slider-slide">
                      <img
                        src="{{ event.banner1.url }}"
                        alt="Banner {{ event.id }}"
                        class="banner-image"
                      />
                    </div>
                    {% endfor %}
                    
                    
                  </div>
                </div>
              </div>
            </div>
          </div>

          <script>
            document.addEventListener("DOMContentLoaded", function () {
              const notificationIcon =
                document.getElementById("notification-icon");
              const overlayContainer = document.getElementById(
                "notification-overlay-container"
              );
              const closeButton = document.getElementById("close-btn");

              // Open the overlay container when the notification icon is clicked
              notificationIcon.addEventListener("click", function () {
                overlayContainer.style.display = "flex";
              });

              // Close the overlay container when the close button is clicked
              closeButton.addEventListener("click", function () {
                overlayContainer.style.display = "none";
              });

              // Optional: Close the overlay when clicking outside the inner container
              overlayContainer.addEventListener("click", function (event) {
                if (event.target === overlayContainer) {
                  overlayContainer.style.display = "none";
                }
              });
            });

            // Function to show the pop-up overlay on page load
            window.onload = function () {
              document.getElementById(
                "updates-events-overlay-container"
              ).style.display = "flex";
            };

            // Function to close the pop-up when the close button is clicked
            document.getElementById("update-events-close-btn").onclick =
              function () {
                document.getElementById(
                  "updates-events-overlay-container"
                ).style.display = "none";
              };
          </script>
            <div class="col-xl-6 col-lg-6 col-md-12">
                <div class="banner__right relative">
                    <div class="swiper-container swiper-3d-2card"
                         data-swiper='{
                        "loop": true,
                        "spaceBetween": 0,
                        "slidesPerView": 1,
                        "centeredSlides": true,
                        "observer": true,
                        "observeParents": true,
                        "freeMode": false,
                        "watchSlidesProgress": true,
                        "grabCursor": true,
                        "navigation": {
                            "prevEl": ".swiper-button-prev",
                            "nextEl": ".swiper-button-next"
                        },
                        "autoplay": {
                            "delay": 2000,
                            "disableOnInteraction": false
                        }
                    }'>
                        <div class="swiper-wrapper">
                            <div class="swiper-slide">
                                <div class="tf-card-box style-2 type-2">
                                    <div class="card-media">
                                        <a href="#">
                                            <img src="http://127.0.0.1:8000/media/{{banner.banner1}}"
                                                 alt="" />
                                        </a>
                                    </div>
                                    <div class="button-place-bid">
                                        <a href="#" class="tf-button"><span>Join Now</span></a>
                                    </div>
                                </div>
                            </div>
                            <div class="swiper-slide">
                                <div class="tf-card-box style-2 type-2">
                                    <div class="card-media">
                                        <a href="#">
                                            <img src="http://127.0.0.1:8000/media/{{banner.banner2}}" alt="" />
                                        </a>
                                    </div>
                                    <div class="button-place-bid">
                                        <a href="#" class="tf-button"><span>Register Now</span></a>
                                    </div>
                                </div>
                            </div>
                            <div class="swiper-slide">
                                <div class="tf-card-box style-2 type-2">
                                    <div class="card-media">
                                        <a href="#">
                                            <img src="http://127.0.0.1:8000/media/{{banner.banner3}}" alt="" />
                                        </a>
                                    </div>
                                    <div class="button-place-bid">
                                        <a href="#" class="tf-button"><span>Register Now</span></a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Swiper Navigation Buttons -->
                    <div class="swiper-button-prev"></div>
                    <div class="swiper-button-next"></div>
                </div>
            </div>

        </div>
        
        <div class="tf-section create-sell" style="margin-top: 100px">
            <div class="themesflat-container">
                <div class="row">
                    <div data-wow-delay="0s"
                         class="wow fadeInUp col-lg-3 col-md-6">
                        <div class="tf-box-icon style-1 step1 relative">
                            <div class="image">
                                <img src="{% static 'images/box-icon/icon-01.png' %}"
                                     alt="" />
                                <p>Total Number of Students Enrolled</p>
                            </div>
                            <h4 class="heading">
                                <a href="contact-us.html">
                                    {{total_intern}}
                                </a>
                            </h4>
                        </div>
                    </div>
                    <div data-wow-delay="0.1s"
                         class="wow fadeInUp col-lg-3 col-md-6">
                        <div class="tf-box-icon style-1 step2 relative">
                            <div class="image">
                                <img src="{% static 'images/box-icon/icon-02.png' %}"
                                     alt="" />
                                <p>Number of students COMPLETED INTERNSHIPS</p>
                            </div>
                            <h4 class="heading">
                                <a href="contact-us.html">
                                    {{completed_intern}}
                                </a>
                            </h4>
                        </div>
                    </div>
                    <div data-wow-delay="0.2s"
                         class="wow fadeInUp col-lg-3 col-md-6">
                        <div class="tf-box-icon style-1 step3 relative">
                            <div class="image">
                                <img src="{% static 'images/box-icon/icon-03.png' %}"
                                     alt="" />
                                <p>Number of students Ongoing Internships</p>
                            </div>
                            <h4 class="heading">
                                <a href="contact-us.html">{{ongoing_intern}}</a>
                            </h4>
                        </div>
                    </div>
                    <div data-wow-delay="0.3s"
                         class="wow fadeInUp col-lg-3 col-md-6">
                        <div class="tf-box-icon style-1 step4 relative">
                            <div class="image">
                                <img src="{% static 'images/box-icon/icon-04.png' %}"
                                     alt="" />
                                <p>Average Attendance Percentage</p>
                            </div>
                            <h4 class="heading">
                                <a href="contact-us.html"> 75 % </a>
                            </h4>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
     <div class="tf-section seller">
        <div class="themesflat-container">
            <div class="row">
                <div class="col-md-12">
                    <div class="heading-section">
                        <h2 class="tf-title pb-30">Badges</h2>
                    </div>
                </div>
                <div class="col-md-12">
                    <div class="swiper-container seller seller-slider2"
                         data-swiper='{
                    "loop": true,
                    "slidesPerView": 6,
                    "observer": true,
                    "grabCursor": true,
                    "observeParents": true,
                    "spaceBetween": 30,
                    "navigation": {
                        "clickable": true,
                        "nextEl": ".seller-next",
                        "prevEl": ".seller-prev"
                    },
                    "breakpoints": {
                        "500": {
                            "slidesPerView": 3
                        },
                        "640": {
                            "slidesPerView": 4
                        },
                        "768": {
                            "slidesPerView": 5
                        },
                        "1070": {
                            "slidesPerView": 6
                        }
                    }
                }'>
                        <div class="swiper-wrapper">
                            <div class="swiper-slide">
                                <div class="tf-author-box style-3 text-center">
                                    <div class="author-avatar">
                                        <img src="{% static 'images/badges/avatar-08.png' %}"
                                             alt=""
                                             class="avatar" />
                                        <div class="hover-overlay">
                                            <span class="view-badge-text" onclick="showBadgePopup(this)">View Badge</span>
                                        </div>
                                    </div>
                                    <div class="author-infor">
                                        <h5><a href="#">Badge 1</a></h5>
                                    </div>
                                </div>
                            </div>

                            <div class="swiper-slide">
                                <div class="tf-author-box style-3 text-center">
                                    <div class="author-avatar">
                                        <img src="{% static 'images/badges/avatar-09.png' %}"
                                             alt=""
                                             class="avatar"
                                              />
                                        <div class="hover-overlay">
                                            <span class="view-badge-text" onclick="showBadgePopup(this)">View Badge</span>
                                        </div>
                                    </div>
                                    <div class="author-infor">
                                        <h5><a href="#">Badge 2</a></h5>
                                    </div>
                                </div>
                            </div>

                            <div class="swiper-slide">
                                <div class="tf-author-box style-3 text-center">
                                    <div class="author-avatar">
                                        <img src="{% static 'images/badges/avatar-10.png' %}"
                                             alt=""
                                             class="avatar" />
                                        <div class="hover-overlay">
                                            <span class="view-badge-text" onclick="showBadgePopup(this)">View Badge</span>
                                        </div>
                                    </div>
                                    <div class="author-infor">
                                        <h5><a href="#">Badge 3</a></h5>
                                    </div>
                                </div>
                            </div>

                            <div class="swiper-slide">
                                <div class="tf-author-box style-3 text-center">
                                    <div class="author-avatar">
                                        <img src="{% static 'images/badges/avatar-11.png' %}"
                                             alt=""
                                             class="avatar" />
                                        <div class="hover-overlay">
                                            <span class="view-badge-text" onclick="showBadgePopup(this)">View Badge</span>
                                        </div>
                                    </div>
                                    <div class="author-infor">
                                        <h5><a href="#">Badge 4</a></h5>
                                    </div>
                                </div>
                            </div>

                            <div class="swiper-slide">
                                <div class="tf-author-box style-3 text-center">
                                    <div class="author-avatar">
                                        <img src="{% static 'images/badges/avatar-12.png' %}"
                                             alt=""
                                             class="avatar" />
                                        <div class="hover-overlay">
                                            <span class="view-badge-text" onclick="showBadgePopup(this)">View Badge</span>
                                        </div>
                                    </div>
                                    <div class="author-infor">
                                        <h5><a href="#">Badge 5</a></h5>
                                    </div>
                                </div>
                            </div>

                            <div class="swiper-slide">
                                <div class="tf-author-box style-3 text-center">
                                    <div class="author-avatar">
                                        <img src="{% static 'images/badges/avatar-13.png' %}"
                                             alt=""
                                             class="avatar" />
                                        <div class="hover-overlay">
                                            <span class="view-badge-text" onclick="showBadgePopup(this)">View Badge</span>
                                        </div>
                                    </div>
                                    <div class="author-infor">
                                        <h5><a href="#">Badge 6</a></h5>
                                    </div>
                                </div>
                            </div>

                            <div class="swiper-slide">
                                <div class="tf-author-box style-3 text-center">
                                    <div class="author-avatar">
                                        <img src="{% static 'images/badges/avatar-14.png' %}"
                                             alt=""
                                             class="avatar" />
                                        <div class="hover-overlay">
                                            <span class="view-badge-text" onclick="showBadgePopup(this)">View Badge</span>
                                        </div>
                                    </div>
                                    <div class="author-infor">
                                        <h5><a href="#">Badge 7</a></h5>
                                    </div>
                                </div>
                            </div>

                            <div class="swiper-slide">
                                <div class="tf-author-box style-3 text-center">
                                    <div class="author-avatar">
                                        <img src="{% static 'images/badges/avatar-15.png' %}"
                                             alt=""
                                             class="avatar" />
                                        <div class="hover-overlay">
                                            <span class="view-badge-text" onclick="showBadgePopup(this)">View Badge</span>
                                        </div>
                                    </div>
                                    <div class="author-infor">
                                        <h5><a href="#">Badge 8</a></h5>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="swiper-button-next seller-next over active" onclick="toggleBadgeSets()"></div>
                    <div class="swiper-button-prev seller-prev over" onclick="toggleBadgeSets()"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="card" style="margin-left: 200px; " id="submit-idea-btn">
        <div class="card-content">
            <div id="line-chart"></div>
        </div>
    </div>

    <div id="gender-pie-chart" style="max-width: 400px; margin-left: 950px; margin-top: -400px;"></div>

    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
 

    <!-- Overlay Container -->
    <div id="student_details_overlay" class="overlay">
        <div class="student_details_inner_container">

            <button id="close-overlay-btn" class="close-btn">&times;</button>

            <div class="tf-section-2 ranking">
                <div class="themesflat-container">
                    <div class="row">
                        <div class="col-12 mb-30">
                            <div class="widget-tabs relative">
                                <div class="tf-soft">
                                    <div class="soft-right">
                                        <div class="dropdown">
                                            <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton4" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M3.125 5.625H16.875M3.125 10H16.875M3.125 14.375H10" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                                </svg>
                                                <span>Department</span>
                                            </button>
                                            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                                <h6>Select</h6>
                                                <a href="#" class="dropdown-item">
                                                    <div class="sort-filter active" href="#">
                                                        <span>CSE</span>
                                                        <span class="icon-tick"><span class="path2"></span></span>
                                                    </div>
                                                </a>
                                                <a href="#" class="dropdown-item">
                                                    <div class="sort-filter" href="#">
                                                        <span>ECE</span>
                                                        <span class="icon-tick"><span class="path2"></span></span>
                                                    </div>
                                                </a>
                                                <a href="#" class="dropdown-item">
                                                    <div class="sort-filter" href="#">
                                                        <span>CCE</span>
                                                        <span class="icon-tick"><span class="path2"></span></span>
                                                    </div>
                                                </a>
                                                <a href="#" class="dropdown-item">
                                                    <div class="sort-filter" href="#">
                                                        <span>IT</span>
                                                        <span class="icon-tick"><span class="path2"></span></span>
                                                    </div>
                                                </a>
                                                <a href="#" class="dropdown-item">
                                                    <div class="sort-filter" href="#">
                                                        <span>AIDS</span>
                                                        <span class="icon-tick"><span class="path2"></span></span>
                                                    </div>
                                                </a>
                                                <a href="#" class="dropdown-item">
                                                    <div class="sort-filter" href="#">
                                                        <span>CSBS</span>
                                                        <span class="icon-tick"><span class="path2"></span></span>
                                                    </div>
                                                </a>

                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <ul class="widget-menu-tab">
                                    <div class="widget-search">
                                        <form action="#" method="get" role="search" class="search-form relative">
                                            <input type="search" id="search" class="search-field style-1" placeholder="Search..." value="" name="s" title="Search for" required="">
                                            <button class="search search-submit" type="submit" title="Search">
                                                <i class="icon-search"></i>
                                            </button>
                                        </form>
                                    </div>

                                </ul>
                                <div class="widget-content-tab pt-10">
                                    <div class="widget-content-inner active">
                                        <div class="widget-table-ranking">
                                            <div data-wow-delay="0s" class="wow fadeInUp table-ranking-heading">
                                                <div class="column">
                                                    <h3>SI NO.</h3>
                                                </div>
                                                <div class="column">
                                                    <h3>Profile</h3>
                                                </div>
                                                <div class="column">
                                                    <h3>Student_id</h3>
                                                </div>
                                                <div class="column">
                                                    <h3>Name</h3>
                                                </div>
                                                <div class="column">
                                                    <h3>Department</h3>
                                                </div>
                                                <div class="column">
                                                    <h3>Intern type</h3>
                                                </div>
                                                <div class="column">
                                                    <h3>View Details</h3>
                                                </div>

                                            </div>
                                            <div class="table-ranking-content">


                                                {% for intern in interns %}
                                                <div data-wow-delay="0s" class="wow fadeInUp fl-row-rankings">
                                                    <div class="column">
                                                        <div class="item-rank">2. </div>

                                                    </div>
                                                    <div class="column">
                                                        <div class="item-avatar">
                                                            <img src="{% static 'assets/images/avatar/avatar-05.png' %}" alt="" />
                                                        </div>

                                                    </div>
                                                    <div class="column">
                                                        <div class="item-name">{{intern.user_id}}</div>

                                                    </div>
                                                    <div class="column">
                                                        <h6>{{intern.student_Name}}</h6>
                                                    </div>
                                                    <div class="column">
                                                        <h6>{{intern.Department}}</h6>
                                                    </div>
                                                    <div class="column">
                                                        <h6>{{intern.domain}}</h6>
                                                    </div>
                                                    <div class="column">
                                                        <button class="view-details-btn" title="View Full Details">
                                                            <i class="fa fa-eye"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                                {% endfor %}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="widget-pagination">
                                <ul class="justify-center">
                                    <li>
                                        <a href="#"><i class="icon-keyboard_arrow_left"></i></a>
                                    </li>
                                    <li>
                                        <a href="#">1</a>
                                    </li>
                                    <li>
                                        <a href="#">2</a>
                                    </li>
                                    <li class="active">
                                        <a href="#">3</a>
                                    </li>
                                    <li>
                                        <a href="#">4</a>
                                    </li>
                                    <li>
                                        <a href="#">...</a>
                                    </li>
                                    <li>
                                        <a href="#"><i class="icon-keyboard_arrow_right"></i></a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="tf-section seller"> 
        <div class="themesflat-container">
            <div class="row">
                <div class="col-md-12">
                    <div class="heading-section">
                        <h2 class="tf-title pb-30">
                            Top participants
                             
                        </h2>
                         
                    </div>
                </div>
                <div class="col-md-12">
                    <div class="swiper-container seller seller-slider"
                         data-swiper='{
                          "loop":false,
                          "slidesPerView": 1,
                          "observer": true,
                          "grabCursor": true,
                          "observeParents": true,
                          "spaceBetween": 30,
                          "navigation": {
                              "clickable": true,
                              "nextEl": ".main-next",
                              "prevEl": ".main-prev"
                          }
                      }'>
                        <div class="swiper-wrapper">
                            <div class="swiper-slide" id="daily">
                                <div class="grid-author-box">
                                    {% for data in top_participants|slice:':6'%}
                                    <div class="tf-author-box style-2 type-1 mb-30">
                                        <div class="author-avatar">
                                            <img src="{% static 'images/avatar/avatar-04.png' %}"
                                                 alt=""
                                                 class="avatar" />
                                        </div>
                                        <div class="author-infor">
                                            <h5>
                                                <a href="{% url 'progress' user_id=data.user_id %}">{{data.user_id}}</a>
                                            </h5>
                                            <h6 class="price gem style-1">
                                                <i class="icon-gem"></i>no of submission
                                            </h6>
                                        </div>
                                        <div class="order tf-color">#{{forloop.counter}}</div>
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>
                             
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="student_view_details_overlay" class="overlay">
        <div class="student_details_inner_container">
            <button id="close-view-details-button" class="close-btn">&times;</button>

            <div class="widget-edit mb-30 avatar" style="background-color: #232323;">
                <form action="#">
                    <div class="uploadfile flex">
                        <img id="student-profile" src="" alt="Profile Picture" class="avatar" style="width: 100px;" />
                        
                        <div class="student-basic-details">
                            <h6>Student ID: <span id="student-id"></span></h6>
                            <h6>Name: <span id="student-name"></span></h6>
                        </div>
    
                        <div class="current-intern" style="font-size: 28px; font-weight: bold; margin-left: 380px; margin-top: 40px;">
                            Python Developer
                        </div>
                    </div>
                     
                </form>
            </div>

            <div class="tf-section create-sell">
                <div class="themesflat-container">
                    <div class="row">
                        <div data-wow-delay="0s"
                             class="wow fadeInUp col-lg-3 col-md-6">
                            <div class="tf-box-icon style-1 step1 relative">
                                <div class="image">
                                    <img src="{% static 'images/box-icon/icon-01.png' %}"
                                         alt="" />
                                    <p>days attended</p>
                                </div>
                                <h4 class="heading">
                                    <a href="contact-us.html">
                                        12/<span class="small-text">30</span>
                                    </a>
                                </h4>
                            </div>
                        </div>
                        <div data-wow-delay="0.1s"
                             class="wow fadeInUp col-lg-3 col-md-6">
                            <div class="tf-box-icon style-1 step2 relative">
                                <div class="image">
                                    <img src="{% static 'images/box-icon/icon-02.png' %}"
                                         alt="" />
                                    <p>TASKS COMPLETED</p>
                                </div>
                                <h4 class="heading">
                                    <a href="contact-us.html">
                                        05/<span class="small-text">15</span>
                                    </a>
                                </h4>
                            </div>
                        </div>
                        <div data-wow-delay="0.2s"
                             class="wow fadeInUp col-lg-3 col-md-6">
                            <div class="tf-box-icon style-1 step3 relative">
                                <div class="image">
                                    <img src="{% static 'images/box-icon/icon-03.png' %}"
                                         alt="" />
                                    <p>CERTIFICATES EARNED</p>
                                </div>
                                <h4 class="heading">
                                    <a href="contact-us.html">03</a>
                                </h4>
                            </div>
                        </div>
                        <div data-wow-delay="0.3s"
                             class="wow fadeInUp col-lg-3 col-md-6">
                            <div class="tf-box-icon style-1 step4 relative">
                                <div class="image">
                                    <img src="{% static 'images/box-icon/icon-04.png' %}"
                                         alt="" />
                                    <p>TOKENS</p>
                                </div>
                                <h4 class="heading">
                                    <a href="contact-us.html"> 230 </a>
                                </h4>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="internship-activity-status" style="width: 450px; background-color: #232323; border-radius: 20px; margin-top: -20px; height: 320px; overflow-y: auto;">
                <div class="widget widget-creators" style="padding: 20px;">
                    <div class="flex items-center justify-between">
                        <h5 class="title-widget" style="margin-bottom: -10px;">Internship Activity</h5>

                    </div>
                    <div class="widget-creators-item flex items-center mb-20">
                        <div class="order">1.</div>
                        <div class="author flex items-center flex-grow">

                            <div class="info">
                                <h6><a href="#">Python Development</a></h6>

                            </div>
                        </div>
                        <span class="status active">Active</span>
                    </div>
                    <div class="widget-creators-item flex items-center mb-20">
                        <div class="order">2.</div>
                        <div class="author flex items-center flex-grow">

                            <div class="info">
                                <h6><a href="#">Web Development</h6>

                            </div>
                        </div>
                        <span class="status completed">Completed</span>
                    </div>
                    <div class="widget-creators-item flex items-center mb-20">
                        <div class="order">3.</div>
                        <div class="author flex items-center flex-grow">

                            <div class="info">
                                <h6><a href="#">UI/UX Design</a></h6>

                            </div>
                        </div>
                        <span class="status completed">Completed</span>
                    </div>
                    <div class="widget-creators-item flex items-center mb-20">
                        <div class="order">4.</div>
                        <div class="author flex items-center flex-grow">

                            <div class="info">
                                <h6><a href="#">Data Analysis</a></h6>

                            </div>
                        </div>
                        <span class="status completed">Completed</span>
                    </div>

                </div>
            </div>

            <div class="student-badge" style="background-color: #232323; width: 250px; border-radius: 20px; margin-left: 470px; margin-top: -320px; height: 320px; overflow-y: auto;">
                <div class="widget widget-coins" style="padding: 20px;">
                    <h5 class="title-widget" style="text-align: left; margin-bottom: 30px;">Rewards earned</h5>
                    <div class="widget-coins-item flex items-center mb-20">
                        <img src="{% static 'images/badges/avatar-09.png' %}" alt="" />
                        <p><a href="#">Badge 1</a></p>
                    </div>
                    <div class="widget-coins-item flex items-center mb-20">
                        <img src="{% static 'images/badges/avatar-08.png' %}" alt="" />
                        <p><a href="#">Badge 2</a></p>
                    </div>
                    <div class="widget-coins-item flex items-center mb-20">
                        <img src="{% static 'images/badges/avatar-10.png' %}" alt="" />
                        <p><a href="#">Badge 3</a></p>
                    </div>
                    <div class="widget-coins-item flex items-center mb-20">
                        <img src="{% static 'images/badges/avatar-11.png' %}" alt="" />
                        <p><a href="#">Badge 4</a></p>
                    </div>
                </div>
            </div>

            <div class="internship-activity-status" style="width: 300px; background-color: #232323; border-radius: 20px; margin-left: 740px; margin-top: -320px; overflow-y: auto; ">
                <div class="widget widget-creators" style="padding: 20px;">
                    <div class="flex items-center justify-between">
                        <h5 class="title-widget" style="margin-bottom: -10px;">Rankings</h5>

                    </div>
                    <div class="widget-creators-item flex items-center mb-20">

                        <div class="author flex items-center flex-grow">
                            <img src="{% static 'assets/images/avatar/avatar-small-01.png' %}" alt="" />
                            <div class="info">
                                <h6><a href="#">Daily Challenge</h6>
                                <span><a href="#" style="font-size: 14px;">#2</a></span>
                            </div>
                        </div>

                    </div>
                    <div class="widget-creators-item flex items-center mb-20">

                        <div class="author flex items-center flex-grow">
                            <img src="{% static 'assets/images/avatar/avatar-small-02.png' %}" alt="" />
                            <div class="info">
                                <h6><a href="#">Weekly Challenge</a></h6>
                                <span><a href="#">#21</a></span>
                            </div>
                        </div>

                    </div>
                    <div class="widget-creators-item flex items-center mb-20">

                        <div class="author flex items-center flex-grow">
                            <img src="{% static 'assets/images/avatar/avatar-small-03.png' %}" alt="" />
                            <div class="info">
                                <h6><a href="#">Common Challenge</a></h6>
                                <span><a href="#">#32</a></span>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <div class="student-attendance-chart" style="width: 600px; margin-top: 30px; background-color: #232323; border-radius: 20px;">
                <div style=" padding: 20px;">
                    <h3 style="text-align: center;">Attendance Trends</h3>
                    <canvas id="attendanceChart" style="max-width: 100%;
height: auto;"></canvas>
                </div>
                <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

            </div>
            <div class="recent-projects-status" style="width: 400px; background-color: #232323; border-radius: 20px; height: 340px; margin-left: 630px; margin-top: -340px; overflow-y: auto;">
                <div class="widget widget-creators" style="padding: 20px;">
                    <div class="flex items-center justify-between">
                        <h5 class="title-widget" style="margin-bottom: -10px;">Recent Projects</h5>

                    </div>
                    <div class="widget-creators-item flex items-center mb-20">
                        <div class="order">1.</div>
                        <div class="author flex items-center flex-grow">

                            <div class="info">
                                <h6><a href="#">Mobile Application Development</a></h6>

                            </div>
                        </div>
                        <span class="status active">Active</span>
                    </div>
                    <div class="widget-creators-item flex items-center mb-20">
                        <div class="order">2.</div>
                        <div class="author flex items-center flex-grow">

                            <div class="info">
                                <h6><a href="#">E-commerce website</h6>

                            </div>
                        </div>
                        <span class="status completed">Completed</span>
                    </div>
                    <div class="widget-creators-item flex items-center mb-20">
                        <div class="order">3.</div>
                        <div class="author flex items-center flex-grow">

                            <div class="info">
                                <h6><a href="#">AI chatbot</a></h6>

                            </div>
                        </div>
                        <span class="status completed">Completed</span>
                    </div>
                    <div class="widget-creators-item flex items-center mb-20">
                        <div class="order">4.</div>
                        <div class="author flex items-center flex-grow">

                            <div class="info">
                                <h6><a href="#">Website design</a></h6>

                            </div>
                        </div>
                        <span class="status completed">Completed</span>
                    </div>
                    <div class="widget-creators-item flex items-center mb-20">
                        <div class="order">5.</div>
                        <div class="author flex items-center flex-grow">

                            <div class="info">
                                <h6><a href="#">Face recognition</a></h6>

                            </div>
                        </div>
                        <span class="status completed">Completed</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="discover-more-container" class="hidden-container">
        
        <div class="inner-container">
            <button class="close-btns" id="close-btns">&times;</button>
            <div class="tf-section-2 ranking">
                <div class="themesflat-container">
                    <div class="row">
                        <div class="col-12 mb-30">
                            <div class="widget-tabs relative">
                                <ul class="widget-menu-tab">
                                    <div class="widget-search">
                                        <form action="{% url 'college_home' %}" method="get" role="search" class="search-form relative">
                                            <input type="search" id="search" class="search-field style-1" placeholder="Search..." value="{{ search_query }}" name="s" title="Search for" required="">
                                            <button class="search search-submit" type="submit" title="Search">
                                                <i class="icon-search"></i>
                                            </button>
                                        </form>
                                    </div>
                                </ul>
                                <div class="widget-content-tab pt-10">
                                    <div class="widget-content-inner active">
                                        <div class="widget-table-ranking">
                                            <div data-wow-delay="0s" class="wow fadeInUp table-ranking-heading">
                                                <div class="column">
                                                    <h3>Rank</h3>
                                                </div>
                                                <div class="column">
                                                    <h3>Profile</h3>
                                                </div>
                                                <div class="column">
                                                    <h3>Student ID</h3>
                                                </div>
                                                <div class="column">
                                                    <h3>Student Name</h3>
                                                </div>
                                                <div class="column">
                                                    <h3>Total Score</h3>
                                                </div>
                                                <div class="column">
                                                    <h3>View</h3>
                                                </div>
                                            </div>
                                            <div class="table-ranking-content" id="top_participants" style="display:block">
                                                {% for data in top_participants %}
                                                <div data-wow-delay="0s" class="wow fadeInUp fl-row-rankings">
                                                    <div class="column">
                                                        <div class="item-name">{{ forloop.counter }}</div>
                                                    </div>
                                                    <div class="column">
                                                        <div class="item-avatar">
                                                            <img src="{% static 'images/avatar/avatar-04.png' %}" alt="">
                                                        </div>
                                                    </div>
                                                    <div class="column">
                                                        <div class="item-name">{{ data.user_id }}</div>
                                                    </div>
                                                    <div class="column">
                                                        <h6>{{ data.student_Name|default:"Unknown" }}</h6>
                                                    </div>
                                                    <div class="column">
                                                        <h6>{{ data.total_score }}</h6>  <!-- Total score shown here -->
                                                    </div>
                                                    <div class="column">
                                                        <button class="view-details-btn"
                                                                title="View Full Details"
                                                                data-user-id="{{ data.user_id }}"
                                                                data-student-name="{{ data.student_Name }}"
                                                                data-profile="{% static 'images/avatar/avatar-04.png' %}">
                                                            <i class="fa fa-eye"></i>
                                                        </button>
                                                    </div>
                                                    
                                                </div>
                                                {% endfor %}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
         
<!-- /#footer -->

<!-- /#page -->
<!-- Modal Popup Bid -->
<div class="modal fade popup"
     id="popup_bid"
     tabindex="-1"
     role="dialog"
     aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <button type="button"
                    class="close"
                    data-dismiss="modal"
                    aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
            <div class="modal-body">
                <div class="image">
                    <img src="assets/images/backgroup-section/popup.png" alt="" />
                </div>
                <div class="logo-rotate">
                    <img class=""
                         src="assets/images/item-background/item6-img.png"
                         alt="" />
                </div>
                <h2>Subscribe to our newsletter</h2>
                <p>Subscribe for our newsletter to stay in the loop</p>
                <fieldset class="email">
                    <input type="email"
                           class="style-1"
                           id="email"
                           placeholder="Email address*"
                           name="email"
                           tabindex="2"
                           value=""
                           aria-required="true"
                           required="" />
                </fieldset>
                <a href class="tf-button style-1 h50">
                    Subscribe<i class="icon-arrow-up-right2"></i>
                </a>
            </div>
        </div>
    </div>
</div>
    
<!-- /#wrapper -->

<div class="tf-mouse tf-mouse-outer"></div>
<div class="tf-mouse tf-mouse-inner"></div>

<div class="progress-wrap active-progress">
    <svg class="progress-circle svg-content"
         width="100%"
         height="100%"
         viewBox="-1 -1 102 102">
        <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"
              style="
            transition: stroke-dashoffset 10ms linear 0s;
            stroke-dasharray: 307.919, 307.919;
            stroke-dashoffset: 286.138;
          "></path>
    </svg>
</div>

<!-- Javascript -->
<script src="{% static 'js/college_home.js' %}"></script>


<div id="badge-popup" class="badge-popup">
    <div class="badge-popup-content">
        <span class="close-badge-popup" role="button" tabindex="0">&times;</span>
        <img id="popup-badge-image" src="" alt="Badge">
        <div class="badge-stats"></div>
    </div>
</div>

<style>
.badge-popup {
    display: none;
    position: fixed;
    z-index: 9999;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.8);
}

.badge-popup-content {
    position: relative;
    background: #1D1D1D;
    padding: 20px;
    border-radius: 10px;
    max-width: 500px;
    margin: 20px auto;
}

.badge-popup-content img {
    width: 100%;
    height: auto;
    border-radius: 10px;
}

.badge-stats {
    background: #232323;
    padding: 15px;
    margin-top: 10px;
    border-radius: 10px;
    text-align: center;
}

.badge-stats p {
    color: white;
    margin: 0;
    font-size: 18px;
}

.close-badge-popup {
    position: absolute;
    right: -15px;
    top: -15px;
    font-size: 24px;
    color: rgb(255, 255, 255);
    cursor: pointer;
    background: #232323;
    width: 30px;
    height: 30px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    z-index: 1000;
}

.close-badge-popup:hover {
    background: #444;
}

/* Add styles for locked badges */
.badge-locked {
    filter: grayscale(100%) brightness(40%);
    position: relative;
}

.lock-icon {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: white;
    font-size: 24px;
    z-index: 1;
}

.threshold-not-met {
    color: #ff4444;
}

.threshold-met {
    color: #44ff44;
}
</style>

<script>
// Update the event listeners for closing the popup
document.addEventListener('DOMContentLoaded', function() {
    // Close popup when clicking the X button
    const closeButton = document.querySelector('.close-badge-popup');
    if (closeButton) {
        closeButton.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            document.getElementById('badge-popup').style.display = 'none';
        });
    }

    // Close popup when clicking outside the content
    const popup = document.getElementById('badge-popup');
    if (popup) {
        popup.addEventListener('click', function(e) {
            if (e.target === this) {
                this.style.display = 'none';
            }
        });
    }

    // Updated badge initialization
    const badges = document.querySelectorAll('.tf-author-box.style-3');
    const total = {{ cr|length }} + {{ dr|length }} + {{ wr|length }};
    
    badges.forEach((badge) => {
        const badgeTitle = badge.querySelector('.author-infor h5 a').textContent;
        const badgeNumber = parseInt(badgeTitle.replace('Badge ', ''));
        const threshold = getBadgeThreshold(badgeNumber);
        
        if (total < threshold) {
            const avatarDiv = badge.querySelector('.author-avatar');
            const img = avatarDiv.querySelector('img');
            img.classList.add('badge-locked');
            
            // Check if lock icon already exists before adding
            if (!avatarDiv.querySelector('.lock-icon')) {
                const lockIcon = document.createElement('i');
                lockIcon.className = 'fas fa-lock lock-icon';
                avatarDiv.appendChild(lockIcon);
            }
        }
    });
});

function getBadgeThreshold(badgeNumber) {
    const thresholds = {
        1: 5000,
        2: 10000,
        3: 20000,
        4: 40000,
        5: 50000,
        6: 75000,
        7: 100000,
        8: 150000
    };
    return thresholds[badgeNumber] || 0;
}
function showBadgePopup(element) {
    const popup = document.getElementById('badge-popup');
    const popupImg = document.getElementById('popup-badge-image');
    const badgeImg = element.parentElement.parentElement.querySelector('img');
    
    // Calculate total score from the variables passed from views.py
    const cr = {{ cr|length }};
    const dr = {{ dr|length }};
    const wr = {{ wr|length }};
    const total = cr + dr + wr;
    
    // Get badge number from the badge title
    const badgeTitle = element.parentElement.parentElement.parentElement.querySelector('.author-infor h5 a').textContent;
    const badgeNumber = parseInt(badgeTitle.replace('Badge ', ''));
    const threshold = getBadgeThreshold(badgeNumber);
    
    popupImg.src = badgeImg.src;
    
    // Update popup content to show threshold information
    const statsHtml = `
        <p>Your Total Score: <span class="${total >= threshold ? 'threshold-met' : 'threshold-not-met'}">${total}</span></p>
        <p>Required Score: ${threshold}</p>
        <p>Status: ${total >= threshold ? '<span class="threshold-met">Unlocked</span>' : '<span class="threshold-not-met">Locked</span>'}</p>
    `;
    
    document.querySelector('.badge-stats').innerHTML = statsHtml;
    popup.style.display = 'block';
}

let showingFirstSet = true;

function toggleBadgeSets() {
    const firstSetBadges = document.querySelectorAll('.badge-set-1');
    const secondSetBadges = document.querySelectorAll('.badge-set-2');
    
    if (showingFirstSet) {
        // Hide first set
        firstSetBadges.forEach(badge => badge.style.display = 'none');
        // Show second set
        secondSetBadges.forEach(badge => badge.style.display = 'block');
    } else {
        // Show first set
        firstSetBadges.forEach(badge => badge.style.display = 'block');
        // Hide second set
        secondSetBadges.forEach(badge => badge.style.display = 'none');
    }
    
    showingFirstSet = !showingFirstSet;
}
</script>

{% endblock %}